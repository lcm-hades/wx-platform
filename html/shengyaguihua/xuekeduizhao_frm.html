<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0"/>
    <meta name="format-detection" content="telephone=no,email=no,date=no,address=no">
    <title>端API</title>
    <link rel="stylesheet" type="text/css" href="../../css/api.css"/>
    <link rel="stylesheet" type="text/css" href="../../css/style.css"/>
    <link rel="stylesheet" type="text/css" href="../../css/aui.css"/>
    <link rel="stylesheet" type="text/css" href="../../css/z.css"/>
    <script type="text/javascript" src="../../script/api.js"></script>
    <script type="text/javascript" src="../../script/aui-tab.js" ></script>
    <script type="text/javascript" src="../../script/doT.js"></script>
    <script src="../../script/jquery-1.8.3.min.js"></script>
    <script src="../../script/demo.js"></script>
       <style>



.z-col{
  text-align: justify;
}

p{
font-family: 'PingFang-SC';
font-size: 0.8rem;
font-weight: 500;

color: #333333;
width: 90%;
margin: auto;
line-height: 1.9
}
.left_line {
    background-color: #6666ff;
    height: 18px;
    width: 4px;
    margin-top: auto;
    margin-bottom: auto;
    margin-left: 10px;
}
span{
  padding-left: 10px;
      line-height: 50px;
  height: 50px;
}
.aui-list .aui-list-item-media {
    width: 4.5rem;
    position: relative;
    padding: 0.5rem 0;
    padding-right: 0.75rem;
    display: block;
    -webkit-flex-shrink: 0;
    flex-shrink: 0;
    -webkit-flex-wrap: nowrap;
    flex-wrap: nowrap;
    -webkit-box-align: center;
    -webkit-align-items: flex-start;
    align-items: flex-start;
}
.aui-list .aui-list-item-text {
    font-size: 0.5rem;
    color: #757575;
    position: relative;
    -webkit-box-sizing: border-box;
    box-sizing: border-box;
    display: -webkit-box;
    display: -webkit-flex;
    display: flex;
    -webkit-box-pack: justify;
    -webkit-justify-content: center;
    justify-content: center;
    -webkit-align-items: center;
    align-items: center;
}
.biaoqian{
  width: 3rem;
 height: 1rem;
 border-radius: 5px;
 background-color: #6f47b6;
 color: #fff!important;
     margin-top: 14px;
}
.huadong{
  position: fixed;top:0;left: 0;
}
.alpha {
   height: 100%!important;
   overflow: hidden!important;
  }
       </style>

</head>

<body >
    <!-- <div class="empty"> -->
      <div id="main" class="flex-con z-col" >
        <div class="screening">

        </div>
        <div class="screening" >
          <ul>
              <li class="Regional" id="shudu">北京</li>
              <li class="Sort" id="xuelicengci">学历层次</li>
              <!-- <li class="Brand">学科门类</li> -->
          </ul>
      </div>
  <div class="grade-eject" id="yincang" tapmode onclick="yincang(event)" >
      <ul class="grade-w" id="gradew">
          <li tapmode onclick="grade1(this)">北京</li>
          <li tapmode onclick="grade1(this)">天津</li>
          <li tapmode onclick="grade1(this)">河北</li>
          <li tapmode onclick="grade1(this)">山西</li>
          <li tapmode onclick="grade1(this)">内蒙古</li>
          <li tapmode onclick="grade1(this)">辽宁</li>
          <li tapmode onclick="grade1(this)">吉林</li>
          <li tapmode onclick="grade1(this)">黑龙江</li>
          <li tapmode onclick="grade1(this)">上海</li>
          <li tapmode onclick="grade1(this)">江苏</li>
          <li tapmode onclick="grade1(this)">南宁</li>
          <li tapmode onclick="grade1(this)">陕西</li>
          <li tapmode onclick="grade1(this)">浙江</li>
          <li tapmode onclick="grade1(this)">安徽</li>
          <li tapmode onclick="grade1(this)">福建</li>
          <li tapmode onclick="grade1(this)">江西</li>
          <li tapmode onclick="grade1(this)">山东</li>
          <li tapmode onclick="grade1(this)">河南</li>
          <li tapmode onclick="grade1(this)">湖北</li>
          <li tapmode onclick="grade1(this)">武汉</li>
          <li tapmode onclick="grade1(this)">湖南</li>
          <li tapmode onclick="grade1(this)">广东</li>
          <li tapmode onclick="grade1(this)">广西</li>
          <li tapmode onclick="grade1(this)">海南</li>
          <li tapmode onclick="grade1(this)">重庆</li>
          <li tapmode onclick="grade1(this)">四川</li>
          <li tapmode onclick="grade1(this)">贵州</li>
          <li tapmode onclick="grade1(this)">云南</li>
          <li tapmode onclick="grade1(this)">甘肃</li>
          <li tapmode onclick="grade1(this)">青海</li>
          <li tapmode onclick="grade1(this)">宁夏</li>
          <li tapmode onclick="grade1(this)">新疆</li>
          <li tapmode onclick="grade1(this)">香港</li>
      </ul>

  </div>

  <div class="Sort-eject Sort-height" id="yincang1" tapmode onclick="yincang(event)">
      <ul class="Sort-Sort" id="Sort-Sort">
          <li tapmode onclick="Sorts(this)">本科</li>
          <li tapmode onclick="Sorts(this)">专科</li>
      </ul>
  </div>
  <!-- End grade -->
  <!-- Category -->
  <!-- <div class="Category-eject">
      <ul class="Category-w" id="Categorytw">
          <li onclick="Categorytw(this)">全部品牌</li>
          <li onclick="Categorytw(this)">奥迪</li>
          <li onclick="Categorytw(this)">丰田</li>
          <li onclick="Categorytw(this)">本田</li>
          <li onclick="Categorytw(this)">大众</li>
          <li onclick="Categorytw(this)">别克</li>
          <li onclick="Categorytw(this)">标志</li>
          <li onclick="Categorytw(this)">东风悦达起亚</li>
          <li onclick="Categorytw(this)">东风</li>
          <li onclick="Categorytw(this)">奔驰</li>
          <li onclick="Categorytw(this)">玛莎拉蒂</li>
          <li onclick="Categorytw(this)">保时捷</li>
          <li onclick="Categorytw(this)">广汽传祺</li>
      </ul>
      <ul class="Category-t" id="Categoryt">
          <li onclick="Categoryt(this)">奥迪A6</li>
          <li onclick="Categoryt(this)">奥迪A6L</li>
          <li onclick="Categoryt(this)">奥迪A4</li>
          <li onclick="Categoryt(this)">奥迪A4L</li>
          <li onclick="Categoryt(this)">奥迪A5</li>
          <li onclick="Categoryt(this)">奥迪A8</li>
          <li onclick="Categoryt(this)">奥迪A8L</li>
          <li onclick="Categoryt(this)">奥迪A3</li>
          <li onclick="Categoryt(this)">奥迪Q5</li>
          <li onclick="Categoryt(this)">奥迪Q7</li>
          <li onclick="Categoryt(this)">奥迪TT</li>
          <li onclick="Categoryt(this)">奥迪R8</li>
      </ul>
      <ul class="Category-s" id="Categorys">
          <li onclick="Categorys(this)">发动机(/进排气系统/燃油系统/冷却系统等)</li>
          <li onclick="Categorys(this)">变速箱</li>
          <li onclick="Categorys(this)">离合器</li>
          <li onclick="Categorys(this)">转向</li>
          <li onclick="Categorys(this)">制动</li>
          <li onclick="Categorys(this)">传动/前后桥</li>
          <li onclick="Categorys(this)">悬挂/车架/车厢</li>
          <li onclick="Categorys(this)">轮胎/钢圈/轮毂</li>
          <li onclick="Categorys(this)">暖风/柴暖/空调系统</li>
          <li onclick="Categorys(this)">汽车电器/电子/传感器</li>
          <li onclick="Categorys(this)">汽车电脑/电子控制单元系统</li>
          <li onclick="Categorys(this)">汽车光电/汽车影音/电子防盗系统</li>
          <li onclick="Categorys(this)">驾驶室/装饰件</li>
          <li onclick="Categorys(this)">轴承/密封件/橡胶件/标准件</li>
          <li onclick="Categorys(this)">汽车润滑/油/脂/液/汽车用品</li>
          <li onclick="Categorys(this)">汽保工具/设备工具/维修设备</li>
          <li onclick="Categorys(this)">液压件/齿轮齿件/挂车/工程机专用件</li>
          <li onclick="Categorys(this)">其他</li>
      </ul>
  </div> -->
  <!-- End Category -->
  <!-- Category -->


  <div class="aui-content aui-margin-b-15" style=" padding-top: 61px;" id="huaddongxiaoguo">
    <ul class="aui-list aui-media-list" id="schools">
  <script id="evaluationtmpl" type="text/x-dot-template">
  {{ for(var i=0;i  <it.length;i++) { }}
      <li class="aui-list-item aui-list-item-middle" tapmode onclick=duizhaoxiangqing1('{{=it[i].dxmc}}','{{=it[i].xlcc}}')>
             <div class="aui-media-list-item-inner">
                 <div class="aui-list-item-media" style="width: 3rem;">
                     <img src="http://www.yxke12.com/Public/Home/images/schools/{{=it[i].logo}}" class="aui-img-round aui-list-img-sm">
                 </div>
                 <div class="aui-list-item-inner ">
                     <div class="aui-list-item-text" style="display: flex;justify-content: left;">
                         <div class="aui-list-item-title aui-font-size-14">{{=it[i].dxmc}}</div>
                     </div>
                     <div class="aui-list-item-text biaoqian">
                         {{=it[i].xlcc}}
                     </div>
                 </div>
                 <div class="aui-list-item-media" style="text-align:right">
                   <i class="aui-iconfont aui-icon-location">{{=it[i].province}}</i>
               </div>
             </div>
         </li>
         {{}}}
</script>
    </ul>
</div>
    </div>
      <!-- </div> -->
</body>

<script type="text/javascript">
var data;
// function aaaa() {
//
//
//     $.ajax({
//         type: "post",
//         url: "http://www.yxke12.com/index.php/App/Zhuanyexueke/lists.html",
//         data: {},
//         dataType: "json",
//         success: function(data) {
//
// var data1 = data.data.schools
//   console.log(JSON.stringify(data1));
//           aaa(data1)
//         }
//     });
// }
// aaaa()
var evalText;
    apiready = function(){

          api.parseTapmode();

         data = JSON.parse(localStorage.data);
         console.log(JSON.stringify(data))
          evalText = doT.template(document.getElementById('evaluationtmpl').innerHTML);
         document.getElementById('schools').innerHTML = evalText(data);


    }

    //js点击事件监听开始
    function grade1(wbj){
      $('#main').removeClass('alpha');
        var arr = document.getElementById("gradew").getElementsByTagName("li");
        for (var i = 0; i < arr.length; i++){
            var a = arr[i];
            a.style.background = "";

        };
        wbj.style.background = "#eee"
      var diqu =  document.getElementById("shudu").innerHTML= wbj.innerHTML
      // diqu
      api.showProgress({
          title: '努力加载中...',
          text: '先喝杯茶...',
          modal: false
      });
        api.ajax({
            url: 'http://www.yxke12.com/index.php/App/Zhuanyexueke/search.html',
            method: 'post',
            data: {
                values: {
                    province: diqu,
                    xueli:''
                },

            }
        },function(ret, err){
            if (ret) {
          api.hideProgress();
          document.getElementById('schools').innerHTML = evalText(ret.data);
                // alert( JSON.stringify( ret ) );
            } else {
              api.toast({
              msg: JSON.stringify(err.msg),
              duration: 2000,
              location: 'bottom'
          });
            }
        });


        // alert()
    }


    function Sorts(sbj){
      $('#main').removeClass('alpha');
        var diqu =  document.getElementById("shudu").innerHTML
        var xuelicengci =  document.getElementById("xuelicengci").innerHTML=sbj.innerHTML
        api.showProgress({
            title: '努力加载中...',
            text: '先喝杯茶...',
            modal: false
        });
        api.ajax({
            url: 'http://www.yxke12.com/index.php/App/Zhuanyexueke/search.html',
            method: 'post',
            data: {
                values: {
                    province: diqu,
                    xueli:xuelicengci
                },

            }
        },function(ret, err){
            if (ret) {
              api.hideProgress();
          //     var html=''
          //     html+='<script id="evaluationtmpl" type="text/x-dot-template">{{ for(var i=0;i  <it.length;i++) { }}  <li class="aui-list-item aui-list-item-middle" tapmode onclick="duizhaoxiangqing()">'
          //     html+=' <div class="aui-media-list-item-inner"> <div class="aui-list-item-media" style="width: 3rem;"> <img src="http://www.yxke12.com/Public/Home/images/schools/{{=it[i].logo}}" class="aui-img-round aui-list-img-sm"> </div>'
          //     html+=' <div class="aui-list-item-inner "> <div class="aui-list-item-text" style="display: flex;justify-content: left;"><div class="aui-list-item-title aui-font-size-14">{{=it[i].dxmc}}</div> </div>'
          //     html+=' <div class="aui-list-item-text biaoqian"> {{=it[i].xlcc}} </div> </div>'
          //     html+='<div class="aui-list-item-media" style="text-align:right"> <i class="aui-iconfont aui-icon-location">{{=it[i].province}}</i></div></div> </li>{{}}}'
          // document.getElementById('schools').innerHTML = html;

          // var evalText = doT.template(document.getElementById('evaluationtmpl').innerHTML);
          document.getElementById('schools').innerHTML = evalText(ret.data);
                // alert( JSON.stringify( ret ) );
            } else {
              api.toast({
              msg: JSON.stringify(err.msg),
              duration: 2000,
              location: 'bottom'
          });
            }
        });

        var arr = document.getElementById("Sort-Sort").getElementsByTagName("li");
        for (var i = 0; i < arr.length; i++){
            var a = arr[i];
            // alert(arr[i].innerHTML)

            a.style.borderBottom = "";
        };
        sbj.style.borderBottom = "solid 1px #ff7c08"

    }

    function duizhaoxiangqing1(xuexiao,xueli) {
      api.showProgress({
          title: '努力加载中...',
          text: '先喝杯茶...',
          modal: false
      });
      api.ajax({
          url: 'http://www.yxke12.com/index.php/App/Zhuanyexueke/infos.html',
          method: 'post',
          data: {
              values: {
                  xueli: xueli,
                  school:xuexiao
              },

          }
      },function(ret, err){
          if (ret) {
            api.hideProgress();
            var data = ret.data.school
            var data1 = ret.data.lists
            console.log(JSON.stringify(data));
            api.openWin({
                name: 'xuekeduizhao_xiangqing_win',
                url: './xuekeduizhao_xiangqing_win.html',
                pageParam: {
                    data: data,
                    data1:data1
                }
            });
              console.log( JSON.stringify( ret ) );
          } else {
              alert( JSON.stringify( err ) );
          }
      });

      // alert(xuexiao)
      // alert(xueli)



    }



    function yincang(e) {
       e.cancleBubble=true;
       $('#main').removeClass('alpha');
      document.getElementById('yincang').className = 'grade-eject'
      document.getElementById('yincang1').className = 'Sort-eject Sort-height'
    }
    // var tab = new auiTab({
    //     element:document.getElementById("tab"),
    // },function(ret){
    //   if (ret.index==1) {
    //       document.getElementById('jieshao').style.display = "block"
    //       document.getElementById('yaoqiu').style.display = "none"
    //       document.getElementById('zhidao').style.display = "none"
    //       document.getElementById('zhuanye').style.display = "none"
    //   }else if (ret.index == 2) {
    //     document.getElementById('jieshao').style.display = "none"
    //     document.getElementById('yaoqiu').style.display = "block"
    //     document.getElementById('zhidao').style.display = "none"
    //     document.getElementById('zhuanye').style.display = "none"
    //   }else if (ret.index == 3) {
    //     document.getElementById('jieshao').style.display = "none"
    //     document.getElementById('yaoqiu').style.display = "none"
    //     document.getElementById('zhidao').style.display = "block"
    //     document.getElementById('zhuanye').style.display = "none"
    //   }else {
    //     document.getElementById('jieshao').style.display = "none"
    //     document.getElementById('yaoqiu').style.display = "none"
    //     document.getElementById('zhidao').style.display = "none"
    //     document.getElementById('zhuanye').style.display = "block"
    //   }
    //     console.log(ret)
    // });

</script>
</html>
