<!doctype html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0" />
    <meta name="format-detection" content="telephone=no,email=no,date=no,address=no">
    <title>底部导航</title>
    <link rel="stylesheet" type="text/css" href="../../css/api.css" />
    <link rel="stylesheet" type="text/css" href="../../css/style.css" />
    <link rel="stylesheet" type="text/css" href="../../css/aui.css" />

    <style>
        .auto {
            height: auto;
        }

        p {
            text-indent: 2em;
            font-size: 16px;
            padding-left: 10px;
            padding-right: 10px;
            font-family: "PingFang-SC";
            color: #666666;
        }

        .left_line {
            background-color: #6666ff;
            height: 18px;
            width: 4px;
            margin-top: auto;
            margin-bottom: auto;
        }

        .section_title {
            color: #6666ff;
            font-size: 18px;
            font-family: "PingFang-SC";
            margin-left: 4px;
            margin-top: auto;
            margin-bottom: auto;
        }

        .four_panel {
            margin: 10px;
            margin-bottom: 0px;
        }

        .four_tile {
            font-family: "PingFang-SC";
            font-size: 18px;
        }

        .content_font {
            font-family: "PingFang-SC";
            font-size: 16px;
            color: #666666;
            margin-top: 10px;
        }

        .img_bg {
            height: 40px;
            width: 90%;
            background-image: url("../../image/four_bg.png");
            background-repeat: no-repeat;
            background-size: 100% 100%;
            margin: 10px auto;
        }

        .img_tile {
            color: white;
            font-size: 16px;
            font-family: "PingFang-SC";
        }

        .left {
            float: left;
            display: inline-block;
            line-height: 40px;
            margin-left: 10px;
        }

        .right {
            float: right;
            display: inline-block;
            line-height: 40px;
            margin-right: 10px;
        }

        .font_title {
            font-weight: bold;
        }

        .xingge_analyze {
            height: auto;
            width: 90%;
            border-radius: 10px;
            border: 1px dashed #6666ff;
            margin: 10px auto;
            padding-bottom: 12px;
        }

        .margin-12 {
            margin: 12px;
        }

        .last-panel {
            background-color: #f7f7f7;
            border-radius: 10px;
            padding: 8px;
            margin: 10px;
        }

        .operation-panel {
            height: 45px;
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .z-btn {
            background: #6666ff;
            height: 33px;
            width: 150px;
            margin-bottom: 0px;
            line-height: 33px;
            width: 45%;
            border-radius: 16.5px;
            /*border: 1px solid #6666ff !important;*/
            color: #ffffff;
            font-size: 14px;
            font-family: "PingFang-SC";
        }

        .white-btn {
            background: #ffffff;
            height: 33px;
            width: 150px;
            margin-bottom: 0px;
            line-height: 33px;
            width: 45%;
            border-radius: 16.5px;
            border: 1px solid #a1a1a1 !important;
            color: #a1a1a1;
            font-size: 14px;
            font-family: "PingFang-SC";
        }

        .margin-left-10 {
            margin-left: 10px;
        }

      /*测试结果*/
      .result_text{
          font-size: 18px;
          font-family: "PingFang-SC";
          text-indent: 0em;
          margin-top: 10px;

      }
      .final_text{
        text-align: center;
        color: #6666ff;
        font-size: 22px;
        font-family: "PingFang-SC";
        text-indent: 0em;
        margin-top: 10px;
        margin-bottom: 10px;
      }

    </style>
</head>

<body style="background-color:white;">
    <div id="report" class="flex-wrap flex-vertical">
        <script id="interpolationtmpl" type="text/x-dot-template">
        <div style="margin-left:10px;padding-top:10px;"><span style="color:#6666ff;font-size:16px;font-weight:bold;font-family: " PingFang-SC ";">{{= it.studentname}}</span><span style="color:#666666;font-size:16px;font-family: " PingFang-SC ";">同学：</span></div>
        <p>您好！</p>
        <p>非常感谢你使用我们的系统进行学科兴趣测试，本测试能帮助你清楚认识自己的学科兴趣，有助于确定今后的学习目标和方向。</p>
        <p>在影响学生大学专业学习的潜能因素中，学科兴趣是很重要的一个方面。它是一个人从事学习、工作等活动的内在心理需要，也是同学们选择专业的前提和基本保证。如果同学们所学的专业与自己感兴趣的事物相关或一致，即准确地捕捉到自己的学科兴趣，上大学后就能较快地适应学习生活。否则，便很有可能“心生厌烦”或者“无法深入”。</p>
        <!-- <p>报告结果没有“好”与“坏”之分，但存在“合适 ”与“不合适”的区别，可以根据多元智能测评的结果，结合自身的情况选择你适合的职业，不断地规划自己前进的方向。</p> -->

        <div style="margin-left:10px;margin-top:10px;height:auto;display: inline-flex;">
            <div class="left_line"></div>
            <span class="section_title">测试方法</span>
        </div>
        <p style="text-indent: 0em;">在12门学科中，数学、物理、化学、生物属于理科科目，语文、历史、地理、政治属于文科科目。可以把这8门学科的得分代入下式计算：</br>文理科适应倾向=文科得分之和-理科得分之和</p>
        <div class="xingge_analyze">
            <p style="text-indent:0em;">
                文理科适应倾向是根据上式的差值范围进行判断的：</br>
                <b>76分以上为明显文科型；</b></br>
                <b>28—75分之间为偏文科型；</b></br>
                <b>27— -27分之间为文理无偏型；</b></br>
                <b>-75— -28分之间为偏理科型；</b></br>
                <b>-76以下为明显理科型</b>
            </p>
        </div>

        <div style="margin-left:10px;margin-top:10px;height:auto;display: inline-flex;">
            <div class="left_line"></div>
            <span class="section_title">测试结果</span>
        </div>
        <p class="result_text">您的各学科兴趣测试分数如下：</p>
        <div id="result" style="width: 100%;height:360px;margin: 0px 0 0px 0;"></div>

        <div class="last-panel">
            <p style="text-indent: 0em;">
                根据您的各个学科兴趣测试结果，我们推荐您选择：
            </p>
            <p class="final_text">{{= it.name}}</p>
        </div>

        <div class="operation-panel">
            <div id="st_id" class="aui-btn aui-btn-primary aui-btn-block white-btn " tapmode onclick="sendTeacher()">发送老师</div>
            <div class="aui-btn aui-btn-primary aui-btn-block z-btn margin-left-10" tapmode onclick="continueTest()">重新测试</div>
        </div>
      </script>
    </div>
</body>
<script type="text/javascript" src="../../script/api.js"></script>
<script type="text/javascript" src="../../script/echart.js"></script>
<script type="text/javascript" src="../../script/doT.js"></script>
<script type="text/javascript">
    var data;
    var source;
    apiready = function() {
      data = $api.strToJson(localStorage.report_data);
      source = api.pageParam.source;
      var conText = doT.template(document.getElementById('interpolationtmpl').innerHTML);
      document.getElementById('report').innerHTML = conText(data);
      var teacher = data.teacher;
      if (teacher == 1) {
        var st = $api.byId('st_id');
        st.disabled = true;
      }
      var score;
      if (data.score == null ) {
          score = [];
      }else {
          score = data.score.split(",");
      }

      var myChart = echarts.init($api.byId('result'));

    option = {
//        color: ['#3398DB'],
        title: {
            textStyle:{ fontSize:15}
        },
        tooltip: {
            trigger: 'axis',
            axisPointer: {            // 坐标轴指示器，坐标轴触发有效
                type: 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
            },
            formatter: "{a} <br/>{b} : {c}%"
        },
        grid: {
            left: '5%',
            right: '5%',
            bottom: '8%',
            containLabel: true
//            y2: 10
        },
        xAxis: [
            {
                type: 'category',
                data: ["地理","外语","历史","数学","政治","美术","音乐","语文","生物","物理","体育","化学"],

                boundaryGap: [0, 0.01],
                axisTick: {
                    alignWithLabel: true,
                    show:false
                },
                axisLabel : {
                    interval: 0,
                    rotate: 45,
                    textStyle:{ fontSize:14},
                    // formatter:function(val){
                    //     return val.split("").join("\n");
                    // }
                },
//                去掉轴线
                axisLine:{show:false}
            }
        ],
        yAxis: [
            {
                type: 'value',
                name: '百分比',
                min: 0,
                max: 50,
                interval: 10,
                formatter: '{value}%',
                axisTick: {
                    alignWithLabel: true

                },
                axisLabel : {
                    textStyle:{ fontSize:14}
                },
//                去掉轴线
                axisLine:{show:false}

            }
        ],
        series: [
            {
                name:'结果',
                type: 'bar',
                barWidth: '100%',
                show:false,
                data: score
            },

        ],
        label: {
            normal: {
                show: true,
                position: 'top',
                formatter: '{c}'
            }
        },
        itemStyle: {
            normal: {
//                color:['#36f8e3', '#f1d937', '#f6166a']
                color: function (params) {
                   var  colorList = ['#d4262f', '#b5c334','#fcce10','#e87c25','#fe8463','#9bca63','#fad860','#f3a43b','#60c0dd', '#d7504b', '#c6e579', '#ee2965'];
//                    if (params.data > 0 && params.data <= 60) {
//                        return colorList[0];
//                    } else if (params.data > 60 && params.data <= 80) {
//                        return colorList[1];
//                    }
//                    else if (params.data > 80) {
//                        return colorList[2];
//                    }
                    return colorList[params.dataIndex]
                }
            }
        }
    };
    myChart.setOption(option);

    };

    function sendTeacher() {
      api.showProgress({
          style: 'default',
          animationType: 'fade',
          title: '努力加载中...',
          text: '先喝杯茶...',
          modal: true
      });
      console.log($api.getStorage('studentid') + "=====" + data.num + "========" + data.name)
      // api.ajax({
      //     url: 'http://www.yxke12.com/index.php/App/Baogao/result.html',
      //     method: 'post',
      //     data: {
      //         values: {
      //             studentid: $api.getStorage('studentid'),
      //             num:data.num,
      //             type:"xueke",
      //             value:data.name
      //         },
      //     }
      // },function(ret, err){
      //     api.hideProgress();
      //     console.log("ddddddddddddddddddddddddd");
          // if (ret) {
          //   if (ret.status == 100) {
          //       // data = ret.data;
          //       var st = $api.byId('st_id');
          //       st.disabled = true;
          //       api.toast({
          //           msg: ret.data.infos,
          //           duration: 2000,
          //           location: 'bottom'
          //       });
          //       // console.log(JSON.stringify(ret.data));
          //   }else {
          //       api.toast({
          //         msg: JSON.stringify(ret.message),
          //         duration: 2000,
          //         location: 'bottom'
          //       });
          //   }
          //     // console.log(JSON.stringify( ret ));
          // } else {
          //   api.toast({
          //       msg: JSON.stringify(err.msg),
          //       duration: 2000,
          //       location: 'bottom'
          //   });
          // }
      // });
    }

    function continueTest() {
        backClick();
    }

    function backClick() {
      if (source == null) {
        api.closeToWin({name:'xueke_test_win'});
      }else if (source == 0) {
         // 我的测试
        api.closeWin();
      }else {
        api.closeWin();
      }
    }
</script>

</html>
