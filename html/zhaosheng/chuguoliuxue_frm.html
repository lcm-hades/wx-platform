<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0"/>
    <meta name="format-detection" content="telephone=no,email=no,date=no,address=no">
    <title>云API</title>
    <link rel="stylesheet" type="text/css" href="../../css/api.css"/>
    <link rel="stylesheet" type="text/css" href="../../css/style.css"/>
    <link rel="stylesheet" type="text/css" href="../../css/aui.css"/>
    <style>

        .zizhuzhaosheng {
          font-family: 'PingFang-SC';
          font-size: 10px;
          color: #fff;
        }
        .zizhuzhaoshengkuan {
          width: 50px;
          height: 14px;
          border-radius: 2px;
          background-color: #ffbc10;
          display: inline-block!important;
          text-align: center!important;
          }
          .biaoti {
            font-family: 'PingFang-SC';
            font-size: 16px;
            color: #333333;
          }
          .shuoming {
            font-family: 'PingFang-SC';
            font-size: 10px;
            color: #666666;
            width: 80%;
          }
          .nianfen {
            font-family: 'PingFang-SC';
            font-size: 16px;
            line-height: 1.25;
            color: #666666;
            width: 20%;
            height: 23px;
           border-radius: 5px;
           border: solid 1px #6666ff;
           background: url(../../image/41-8.png) no-repeat scroll 90% center transparent;
           background-size: 14px;
          }
          table{
            width: 100%;
            text-align: center;
          }
          tr{
            font-size: 12px;
          }
          .chakan{
            font-family: 'PingFang-SC';
            color: #0281f9;
          }
        .yinc{
          display: -webkit-box;
          -webkit-box-orient: vertical;
          -webkit-line-clamp: 3;
          overflow: hidden;
          font-size: 0.6rem!important;
        }
        .aui-tab-item.aui-active {
          color: #6666ff;
          border-bottom: 2px solid #6666ff;
        }
        .tab-position{
          width: 100%;
          position: fixed;
          z-index: 3;
          top: 0px;
        }
    </style>
</head>
<body>
    <div class="aui-tab tab-position" id="tab">
        <div class="aui-tab-item aui-active">资讯</div>
        <div class="aui-tab-item">方略</div>
        <div class="aui-tab-item">外国高校</div>
        <div class="aui-tab-item">留学辅导</div>
    </div>

    <div class="aui-content aui-margin-b-15" id="liuzixun" style="display:block;padding-top:46px;">
        <ul class="aui-list aui-media-list" id="zixun_ul">
          <script id="zixun_s" type="text/x-dot-template">
            {{for (var i = 0; i < it.length; i++) {}}
              <li class="aui-list-item" tapmode onclick="onZItemClick({{=i}})">
                  <div class="aui-media-list-item-inner">
                      <div class="aui-list-item-inner">
                          <div class="aui-list-item-text">
                              <div class="aui-list-item-title biaoti">{{=it[i].name}}</div>
                          </div>
                      </div>
                  </div>
                  <div class="aui-info" style="padding-top:0">
                      <div class="aui-info-item zizhuzhaoshengkuan">
                        <span class="zizhuzhaosheng">出国留学</span>
                      </div>
                      <div class="aui-info-item zizhuzhaosheng">{{=it[i].time}}</div>
                  </div>
              </li>
            {{}}}
            </script>
        </ul>
    </div>

    <div class="aui-content aui-margin-b-15" id="liufangluo" style="display:none;padding-top:46px;">
        <ul class="aui-list aui-media-list" id="fanglue_ul">
          <script id="fanglue_s" type="text/x-dot-template">
            {{for (var i = 0; i < it.length; i++) {}}
            <li class="aui-list-item" tapmode onclick="onFItemClick({{=i}})">
                <div class="aui-media-list-item-inner">
                    <div class="aui-list-item-inner">
                        <div class="aui-list-item-text">
                            <div class="aui-list-item-title biaoti">{{=it[i].name}}</div>
                        </div>
                    </div>
                </div>
                <div class="aui-info" style="padding-top:0">
                    <div class="aui-info-item zizhuzhaoshengkuan">
                      <span class="zizhuzhaosheng">出国留学</span>
                    </div>
                    <div class="aui-info-item zizhuzhaosheng">{{=it[i].time}}</div>
                </div>
            </li>
            {{}}}
            </script>
        </ul>
    </div>

    <div class="aui-content aui-margin-b-15" id="liujianzhang"  style="display:none;padding-top:46px;">
      <ul class="aui-list aui-media-list" id="waiguo_ul">
        <script id="waiguo_s" type="text/x-dot-template">
          {{for (var i = 0; i < it.length; i++) {}}
          <li class="aui-list-item" tapmode onclick="onWItemClick({{=i}})">
              <div class="aui-media-list-item-inner">
                  <div class="aui-list-item-inner">
                      <div class="aui-list-item-text">
                          <div class="aui-list-item-title biaoti">{{=it[i]}}</div>
                      </div>
                  </div>
              </div>
          </li>
          {{}}}
          </script>
      </ul>
    </div>

    <div class="aui-content aui-margin-b-15" id="liuxuefudao"  style="display:none;padding-top:46px;">
      <ul class="aui-list aui-media-list">
        <li class="aui-list-item">
          <div class="aui-media-list-item-inner">
              <div class="aui-list-item-media">
                  <img src="../../image/chuguo_01.png">
              </div>
              <div class="aui-list-item-inner">
                  <div class="aui-list-item-text">
                      <div class="aui-list-item-title yinc" >泓钰学校(全称：北京市朝阳区泓钰培训学校)，始建于2001年，是在意大利驻华大使馆文化处的鼎力协助下，由北京市教委特别批准设立的一所集意、德、法、西等小语种为一体的国际语言和文化培训学校，也是我国第一家专业致力于意大利语培训的学校。</div>
                  </div>
              </div>
          </div>

        </li>
      </ul>
    </div>

</body>
<script type="text/javascript" src="../../script/api.js" ></script>
<script type="text/javascript" src="../../script/aui-tab.js" ></script>
<script type="text/javascript" src="../../script/doT.js" ></script>
<script type="text/javascript">
    var ziXunDataList = [];
    var fanglueDataList = [];
    var waiguoDataList = [];
    var flag_arr = [1,0,0,0];
    apiready = function(){
        api.parseTapmode();
        getZiXunData();
    }
    var tab = new auiTab({
        element:document.getElementById("tab"),
    },function(ret){
        if (ret.index == 1) {
          document.getElementById('liuzixun').style.display = "block"
          document.getElementById('liufangluo').style.display = "none"
          document.getElementById('liujianzhang').style.display = "none"
          document.getElementById('liuxuefudao').style.display = "none"
        }else if (ret.index == 2) {
          document.getElementById('liuzixun').style.display = "none"
          document.getElementById('liufangluo').style.display = "block"
          document.getElementById('liujianzhang').style.display = "none"
          document.getElementById('liuxuefudao').style.display = "none"
          if (flag_arr[ret.index - 1] == 0) {
              flag_arr[ret.index - 1] = 1;
              getFangLV();
          }
        }else if (ret.index == 3){
          document.getElementById('liuzixun').style.display = "none"
          document.getElementById('liufangluo').style.display = "none"
          document.getElementById('liujianzhang').style.display = "block"
          document.getElementById('liuxuefudao').style.display = "none"
          if (flag_arr[ret.index - 1] == 0) {
              flag_arr[ret.index - 1] = 1;
              getWaiGuo();
          }
        }else {
          document.getElementById('liuzixun').style.display = "none"
          document.getElementById('liufangluo').style.display = "none"
          document.getElementById('liujianzhang').style.display = "none"
          document.getElementById('liuxuefudao').style.display = "block"
        }
    });

    function getZiXunData() {
      api.showProgress({
          style: 'default',
          animationType: 'fade',
          title: '努力加载中...',
          text: '先喝杯茶...',
          modal: true
      });
      api.ajax({
          url: 'http://www.yxke12.com/index.php/App/Chuguo/zixun.html',
          method: 'post',
          data: {
              values: {
              }
          }
      },function(ret, err){
        api.hideProgress();
          if (ret) {
              // alert( JSON.stringify( ret ) );
              if (ret.status == 100) {
                ziXunDataList = ret.data;
                var gkgz_dot = doT.template(document.getElementById('zixun_s').innerHTML);
                document.getElementById('zixun_ul').innerHTML = gkgz_dot(ziXunDataList);
                api.parseTapmode();
              }
          } else {
            api.toast({
            msg: JSON.stringify(err.msg),
            duration: 2000,
            location: 'bottom'
        });
          }
      });
    }

    function getFangLV() {
      api.showProgress({
          style: 'default',
          animationType: 'fade',
          title: '努力加载中...',
          text: '先喝杯茶...',
          modal: true
      });

      api.ajax({
          url: 'http://www.yxke12.com/index.php/App/Chuguo/fanglue.html',
          method: 'post',
          data: {
              values: {
              }
          }
      },function(ret, err){
        api.hideProgress();
          if (ret) {
            if (ret.status == 100) {
                // console.log( JSON.stringify( ret ) );
                fanglueDataList = ret.data;
                var zizhuzhaosheng = doT.template(document.getElementById('fanglue_s').innerHTML);
                document.getElementById('fanglue_ul').innerHTML = zizhuzhaosheng(fanglueDataList);
                api.parseTapmode();
            }
          } else {
            api.toast({
            msg: JSON.stringify(err.msg),
            duration: 2000,
            location: 'bottom'
        });
          }
      });
    }

    function getWaiGuo() {
      api.showProgress({
          style: 'default',
          animationType: 'fade',
          title: '努力加载中...',
          text: '先喝杯茶...',
          modal: true
      });

      api.ajax({
          url: 'http://www.yxke12.com/index.php/App/Chuguo/schools.html',
          method: 'post',
          data: {
              values: {
              }
          }
      },function(ret, err){
        api.hideProgress();
          if (ret) {
            if (ret.status == 100) {
                // console.log( JSON.stringify( ret ) );
                waiguoDataList = ret.data;
                var waiguo_dot = doT.template(document.getElementById('waiguo_s').innerHTML);
                document.getElementById('waiguo_ul').innerHTML = waiguo_dot(waiguoDataList);
                api.parseTapmode();
            }
          } else {
            api.toast({
            msg: JSON.stringify(err.msg),
            duration: 2000,
            location: 'bottom'
        });
          }
      });
    }

    // 资讯item点击回调
    function onZItemClick(index) {
      var id = ziXunDataList[index].id;
      api.openWin({
          name: 'zzzs_zxfl_details_win',
          url: './zzzs_zxfl_details_win.html',
          pageParam: {
              id: id,
              title:"出国留学"
          }
      });
    }

    // 方略item点击回调
    function onFItemClick(index) {
      var id = fanglueDataList[index].id;
      api.openWin({
          name: 'zzzs_zxfl_details_win',
          url: './zzzs_zxfl_details_win.html',
          pageParam: {
              id: id,
              title:"出国留学"
          }
      });
    }

    function onWItemClick(index) {
      var name = waiguoDataList[index];
      // console.log(name);
      var param = {};
      param.name = name;
      api.openWin({
          name: 'dyzs_details_win',
          url: './dyzs_details_win.html',
          pageParam: {
              url:"http://www.yxke12.com/index.php/App/Chuguo/detail.html",
              values:$api.jsonToStr(param),
              title:name
          }
      });
    }
</script>
</html>
