<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0"/>
    <meta name="format-detection" content="telephone=no,email=no,date=no,address=no">
    <title>云API</title>
    <link rel="stylesheet" type="text/css" href="../../../css/api.css"/>
    <link rel="stylesheet" type="text/css" href="../../../css/style.css"/>
    <link rel="stylesheet" type="text/css" href="../../../css/aui.css"/>
    <style>
        .time {
          font-size: 10px;
          color: #666666;
        }
        .zizhuzhaosheng {
          font-family: 'PingFang-SC';
          font-size: 10px;
          color: white;
        }
        .zizhuzhaoshengkuan {
          padding: 2px 4px;
          border-radius: 2px;
          background-color: #36c7fa;
          display: inline-block!important;
          text-align: center!important;
          }
          .biaoti {
            font-family: 'PingFang-SC';
            font-size: 16px;
            color: #333333;
          }
          .shuoming {
            font-family: 'PingFang-SC';
            font-size: 10px;
            color: #666666;
            width: 80%;
          }
          .nianfen {
            font-family: 'PingFang-SC';
            font-size: 16px;
            line-height: 1.25;
            color: #666666;
            width: 20%;
            height: 23px;
           border-radius: 5px;
           border: solid 1px #6666ff;
           background: url(../../../image/41-8.png) no-repeat scroll 90% center transparent;
           background-size: 14px;
          }
          table{
            width: 100%;
            text-align: center;
          }
          tr{
            font-size: 12px;
          }
          .chakan{
            font-family: 'PingFang-SC';
            color: #0281f9;
          }
        .yinc{
          display: -webkit-box;
          -webkit-box-orient: vertical;
          -webkit-line-clamp: 3;
          overflow: hidden;
          font-size: 0.6rem!important;
        }
        .aui-tab-item.aui-active {
          color: #6666ff;
          border-bottom: 2px solid #6666ff;
        }
    </style>
</head>
<body>
    <!-- <div class="aui-tab" id="tab">
        <div class="aui-tab-item aui-active">专题讲座</div>
        <div class="aui-tab-item">智慧学堂</div>
        <div class="aui-tab-item">家长书架</div>
        <div class="aui-tab-item">海外之窗</div>
    </div> -->

    <div class="aui-content aui-margin-b-15" id="liuzixun" style="display:none">
        <ul class="aui-list aui-media-list" id="zixun_ul">
          <script id="pingdeyangcheng" type="text/x-dot-template">
              {{ for(var i=0;i  <it.length;i++) { }}
              <li class="aui-list-item" tapmode onclick="onFItemClick('{{=it[i].link}}','{{=it[i].title}}')">
                  <div class="aui-media-list-item-inner">
                      <div class="aui-list-item-inner">
                          <div class="aui-list-item-text">
                              <div class="aui-list-item-title biaoti">{{=it[i].title}}</div>
                          </div>
                      </div>
                  </div>
                  <div class="aui-info" style="padding-top:0">
                      <div class="aui-info-item zizhuzhaoshengkuan">
                        <span class="zizhuzhaosheng">专题讲座</span>
                      </div>
                      <div class="aui-info-item time">{{=it[i].time}}</div>
                  </div>
              </li>
              {{}}}
              </script>
        </ul>
    </div>

    <div class="aui-content aui-margin-b-15" id="liufangluo" style="display:none;">
        <ul class="aui-list aui-media-list" id="fanglue_ul">
          <script id="xueyezhidao" type="text/x-dot-template">
              {{ for(var i=0;i  <it.length;i++) { }}
            <li class="aui-list-item" tapmode onclick="onZItemClick({{=it[i].id}})">
                <div class="aui-media-list-item-inner">
                    <div class="aui-list-item-inner">
                        <div class="aui-list-item-text">
                            <div class="aui-list-item-title biaoti">{{=it[i].title}}</div>
                        </div>
                    </div>
                </div>
                <div class="aui-info" style="padding-top:0">
                    <div class="aui-info-item zizhuzhaoshengkuan">
                      <span class="zizhuzhaosheng">智慧学堂</span>
                    </div>
                    <div class="aui-info-item time">{{=it[i].time}}</div>
                </div>
            </li>
            {{}}}
            </script>
        </ul>
    </div>

    <div class="aui-content aui-margin-b-15" id="liujianzhang"  style="display:block;">
      <ul class="aui-list aui-media-list" id="waiguo_ul">
        <script id="shehuizhijian" type="text/x-dot-template">
            {{ for(var i=0;i  <it.length;i++) { }}
        <li class="aui-list-item" tapmode onclick="onZItemClick({{=it[i].id}})">
            <div class="aui-media-list-item-inner">
                <div class="aui-list-item-inner">
                    <div class="aui-list-item-text">
                        <div class="aui-list-item-title biaoti">{{=it[i].title}}</div>
                    </div>
                </div>
            </div>
            <div class="aui-info" style="padding-top:0">
                <div class="aui-info-item zizhuzhaoshengkuan">
                  <span class="zizhuzhaosheng">家长书架</span>
                </div>
                <div class="aui-info-item time">{{=it[i].time}}</div>
            </div>
        </li>
        {{}}}
        </script>
      </ul>
    </div>

    <div class="aui-content aui-margin-b-15" id="liuxuefudao"  style="display:none;">
      <ul class="aui-list aui-media-list" id="haiwai_ul">
        <script id="haiwaizhichuang" type="text/x-dot-template">
            {{ for(var i=0;i  <it.length;i++) { }}
        <li class="aui-list-item" tapmode onclick="onZItemClick({{=it[i].id}})">
            <div class="aui-media-list-item-inner">
                <div class="aui-list-item-inner">
                    <div class="aui-list-item-text">
                        <div class="aui-list-item-title biaoti">{{=it[i].title}}</div>
                    </div>
                </div>
            </div>
            <div class="aui-info" style="padding-top:0">
                <div class="aui-info-item zizhuzhaoshengkuan">
                  <span class="zizhuzhaosheng">海外之窗</span>
                </div>
                <div class="aui-info-item time">{{=it[i].time}}</div>
            </div>
        </li>
        {{}}}
        </script>
      </ul>
    </div>


</body>
<script type="text/javascript" src="../../../script/api.js" ></script>
<script type="text/javascript" src="../../../script/aui-tab.js" ></script>
<script type="text/javascript" src="../../../script/doT.js" ></script>
<script type="text/javascript">
    var dataList = [];
    var fanglueDataList = [];
    var waiguoDataList = [];
    var flag_arr = [1,0,0,0];
    var browser;
    apiready = function(){

        api.parseTapmode();
           browser = api.require('webBrowser');
        dataList = JSON.parse(localStorage.data)
        console.log(JSON.stringify(dataList));
        var pingdeyangcheng = doT.template(document.getElementById('shehuizhijian').innerHTML);
        document.getElementById('waiguo_ul').innerHTML = pingdeyangcheng(dataList);
    }
    var tab = new auiTab({
        element:document.getElementById("tab"),
    },function(ret){
        if (ret.index == 1) {
          document.getElementById('liuzixun').style.display = "block"
          document.getElementById('liufangluo').style.display = "none"
          document.getElementById('liujianzhang').style.display = "none"
          document.getElementById('liuxuefudao').style.display = "none"
        }else if (ret.index == 2) {
          document.getElementById('liuzixun').style.display = "none"
          document.getElementById('liufangluo').style.display = "block"
          document.getElementById('liujianzhang').style.display = "none"
          document.getElementById('liuxuefudao').style.display = "none"
          if (flag_arr[ret.index - 1] == 0) {
              flag_arr[ret.index - 1] = 1;
              getFangLV();
          }
        }else if (ret.index == 3){
          document.getElementById('liuzixun').style.display = "none"
          document.getElementById('liufangluo').style.display = "none"
          document.getElementById('liujianzhang').style.display = "block"
          document.getElementById('liuxuefudao').style.display = "none"
          if (flag_arr[ret.index - 1] == 0) {
              flag_arr[ret.index - 1] = 1;
              getWaiGuo();
          }
        }else {
          document.getElementById('liuzixun').style.display = "none"
          document.getElementById('liufangluo').style.display = "none"
          document.getElementById('liujianzhang').style.display = "none"
          document.getElementById('liuxuefudao').style.display = "block"
          if (flag_arr[ret.index - 1] == 0) {
              flag_arr[ret.index - 1] = 1;
              gethaiwai();
          }
        }
    });

    function getFangLV() {
      api.showProgress({
          style: 'default',
          animationType: 'fade',
          title: '努力加载中...',
          text: '先喝杯茶...',
          modal: true
      });

      api.ajax({
          url: 'http://www.yxke12.com/index.php/Apa/Jiazhangxuexiao/zhxt.html',
          method: 'post',
          data: {
              values: {
              }
          }
      },function(ret, err){
        api.hideProgress();
          if (ret) {
            if (ret.status == 100) {
                // console.log( JSON.stringify( ret ) );
                fanglueDataList = ret.data;
                var xueyezhidao = doT.template(document.getElementById('xueyezhidao').innerHTML);
                document.getElementById('fanglue_ul').innerHTML = xueyezhidao(fanglueDataList);
                api.parseTapmode();
            }
          } else {
            api.hideProgress();
              api.toast({
                  msg: JSON.stringify(err.msg),
                  duration: 2000,
                  location: 'bottom'
              });
          }
      });
    }

    function getWaiGuo() {
      api.showProgress({
          style: 'default',
          animationType: 'fade',
          title: '努力加载中...',
          text: '先喝杯茶...',
          modal: true
      });

      api.ajax({
          url: 'http://www.yxke12.com/index.php/Apa/Jiazhangxuexiao/jzsj.html',
          method: 'post',
          data: {
              values: {
              }
          }
      },function(ret, err){
        api.hideProgress();
          if (ret) {
            if (ret.status == 100) {
                // console.log( JSON.stringify( ret ) );
                waiguoDataList = ret.data;
                var shehuizhijian = doT.template(document.getElementById('shehuizhijian').innerHTML);
                document.getElementById('waiguo_ul').innerHTML = shehuizhijian(waiguoDataList);
                api.parseTapmode();
            }
          } else {
            api.hideProgress();
              api.toast({
                  msg: JSON.stringify(err.msg),
                  duration: 2000,
                  location: 'bottom'
              });
          }
      });
    }


    function gethaiwai() {
      api.showProgress({
          style: 'default',
          animationType: 'fade',
          title: '努力加载中...',
          text: '先喝杯茶...',
          modal: true
      });

      api.ajax({
          url: 'http://www.yxke12.com/index.php/Apa/Jiazhangxuexiao/hwzc.html',
          method: 'post',
          data: {
              values: {
              }
          }
      },function(ret, err){
        api.hideProgress();
          if (ret) {
            if (ret.status == 100) {
                console.log( JSON.stringify( ret ) );
                waiguoDataList = ret.data;
                var haiwai = doT.template(document.getElementById('haiwaizhichuang').innerHTML);
                document.getElementById('haiwai_ul').innerHTML = haiwai(waiguoDataList);
                api.parseTapmode();
            }
          } else {
            api.hideProgress();
              api.toast({
                  msg: JSON.stringify(err.msg),
                  duration: 2000,
                  location: 'bottom'
              });
          }
      });
    }



    // 心理健康item点击回调
    function onZItemClick(id) {
      // var id = dataList[index].id;
      api.openWin({
          name: 'shehuishijian_win',
          url: '../xueyeguihua/shehuishijian_win.html',
          pageParam: {
              data: id,
              url: "http://www.yxke12.com/index.php/Apa/Jiazhangxuexiao/detail.html",
              // faurl: "http://www.yxke12.com/index.php/Apa/Jiayoukaosheng/addcomment.html",
              // hurl: "http://www.yxke12.com/index.php/Apa/Jiayoukaosheng/reply.html",
              // hqurl:"http://www.yxke12.com/index.php/Apa/Jiayoukaosheng/getreply.html",
              // durl:"http://www.yxke12.com/index.php/Apa/Jiayoukaosheng/dianzan.html",
              title:"家长书架"
          }
      });
    }

    // 健康饮食item点击回调
    function onFItemClick(url,title) {
    if (url) {

      browser.openView({
          url: url,
          rect: {
              x: 0,
              y: 64,
              w: 'auto',
              h: 'auto'
          }
      }, function(ret, err) {

      });

      // browser.open({
      //     url: url,
      //     titleBar:
      // });
    }else {
      // alert(url)
    api.openWin({
        name: 'shehuixiangqing_win',
        url: '../xueyeguihua/shehuixiangqing_win.html',
        pageParam: {
            data: url
        }
    });
    }



    }

    // 劳逸结合item点击回调
    function onLItemClick(index) {
      var id = waiguoDataList[index].id;
      api.openWin({
          name: 'jksh_details_win',
          url: '../jiayoukaosheng/jiankangshenghuo/jksh_details_win.html',
          pageParam: {
              data: id,
              url: "http://www.yxke12.com/index.php/Apa/Jiazhangxuexiao/detail.html",
              // faurl: "http://www.yxke12.com/index.php/Apa/Jiayoukaosheng/addcomment.html",
              // hurl: "http://www.yxke12.com/index.php/Apa/Jiayoukaosheng/reply.html",
              // hqurl:"http://www.yxke12.com/index.php/Apa/Jiayoukaosheng/getreply.html",
              // durl:"http://www.yxke12.com/index.php/Apa/Jiayoukaosheng/dianzan.html",
              title:"海外之窗"
          }
      });
    }
</script>
</html>
