<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0"/>
    <meta name="format-detection" content="telephone=no,email=no,date=no,address=no">
    <title>云API</title>
    <link rel="stylesheet" type="text/css" href="../../../css/api.css"/>
    <link rel="stylesheet" type="text/css" href="../../../css/style.css"/>
    <link rel="stylesheet" type="text/css" href="../../../css/aui.css"/>
    <style>
        .time {
          font-size: 10px;
          color: #666666;
        }
        .zizhuzhaosheng {
          font-family: 'PingFang-SC';
          font-size: 10px;
          color: white;
        }
        .zizhuzhaoshengkuan {
          padding: 2px 4px;
          border-radius: 2px;
          background-color: #ff7769;
          display: inline-block!important;
          text-align: center!important;
          }
          .biaoti {
            font-family: 'PingFang-SC';
            font-size: 16px;
            color: #333333;
          }
          .shuoming {
            font-family: 'PingFang-SC';
            font-size: 10px;
            color: #666666;
            width: 80%;
          }
          .nianfen {
            font-family: 'PingFang-SC';
            font-size: 16px;
            line-height: 1.25;
            color: #666666;
            width: 20%;
            height: 23px;
           border-radius: 5px;
           border: solid 1px #6666ff;
           background: url(../../../image/41-8.png) no-repeat scroll 90% center transparent;
           background-size: 14px;
          }
          table{
            width: 100%;
            text-align: center;
          }
          tr{
            font-size: 12px;
          }
          .chakan{
            font-family: 'PingFang-SC';
            color: #0281f9;
          }
        .yinc{
          display: -webkit-box;
          -webkit-box-orient: vertical;
          -webkit-line-clamp: 3;
          overflow: hidden;
          font-size: 0.6rem!important;
        }
        .aui-tab-item.aui-active {
          color: #6666ff;
          border-bottom: 2px solid #6666ff;
        }
      }
      .h-92{
        height: 92px;
      }
      .tuijian {
          margin-top: 10px;
          height: auto;
          background: #fff;
          width: 100%;
          position: relative;
          text-align: center;
          line-height: 3;
          font-size: 16px;
          font-family: ' PingFang-SC';
          color: #333333;
      }
    </style>
</head>
<body>
    <div class="aui-tab" id="tab">
        <div class="aui-tab-item aui-active">品德养成</div>
        <div class="aui-tab-item">学业指导</div>
        <div class="aui-tab-item">社会实践</div>
        <!-- <div class="aui-tab-item">留学辅导</div> -->
    </div>

    <div class="aui-content aui-margin-b-15" id="liuzixun" style="display:block">
        <ul class="aui-list aui-media-list" id="zixun_ul">
          <script id="pingdeyangcheng" type="text/x-dot-template">
              {{ for(var i=0;i  <it.length;i++) { }}

              <li class="aui-list-item" tapmode onclick="onZItemClick({{=it[i].id}})">
                  <div class="aui-media-list-item-inner" style="">
                      <div class="aui-list-item-inner" style="padding-bottom:0px;padding-right:0px;">
                          <div class="aui-list-item-text">
                              <div class="aui-list-item-title biaoti">{{=it[i].name}}</div>
                          </div>
                          <div class="aui-info" style="padding-top:30px;padding-bottom:0.5rem;">
                                <div class="aui-info-item zizhuzhaoshengkuan">
                                  <span class="zizhuzhaosheng">品德养成</span>
                                </div>
                              <div class="aui-info-item time" style="padding-right:10px;">{{=it[i].time}}</div>
                          </div>
                      </div>
                      {{if (it[i].pict != null) {}}
                        <div class="aui-list-item-media">
                            <img style="width:72px;height:72px;"src="http://www.yxke12.com/Public/Teacher/images/xueshengchengzhangzhidao/{{=it[i].pict}}">
                        </div>
                      {{}}}
                  </div>
              </li>



              {{}}}
              </script>
              <!-- <li class="aui-list-item" tapmode onclick="onZItemClick({{=it[i].id}})">
                  <div class="aui-media-list-item-inner">
                      <div class="aui-list-item-inner">
                          <div class="aui-list-item-text">
                              <div class="aui-list-item-title biaoti">{{=it[i].name}}</div>
                          </div>
                      </div>
                  </div>
                  <div class="aui-info" style="padding-top:0">
                      <div class="aui-info-item zizhuzhaoshengkuan">
                        <span class="zizhuzhaosheng">品德养成</span>
                      </div>
                      <div class="aui-info-item zizhuzhaosheng">{{=it[i].time}}</div>
                  </div>
              </li> -->
        </ul>
    </div>

    <div class="aui-content aui-margin-b-15" id="liufangluo" style="display:none;">
        <ul class="aui-list aui-media-list" id="fanglue_ul">
          <script id="xueyezhidao" type="text/x-dot-template">
              {{ for(var i=0;i  <it.length;i++) { }}

              <li class="aui-list-item" tapmode onclick="onZItemClick({{=it[i].id}})">
                  <div class="aui-media-list-item-inner" style="">
                      <div class="aui-list-item-inner" style="padding-bottom:0px;padding-right:0px;">
                          <div class="aui-list-item-text">
                              <div class="aui-list-item-title biaoti">{{=it[i].name}}</div>
                          </div>
                          <div class="aui-info" style="padding-top:30px;padding-bottom:0.5rem;">
                                <div class="aui-info-item zizhuzhaoshengkuan">
                                  <span class="zizhuzhaosheng">学业指导</span>
                                </div>
                              <div class="aui-info-item time" style="padding-right:10px;">{{=it[i].time}}</div>
                          </div>
                      </div>
                      {{if (it[i].pict != null) {}}
                        <div class="aui-list-item-media" style="padding-left:10px;">
                            <img style="width:72px;height:72px;"src="http://www.yxke12.com/Public/Teacher/images/xueshengchengzhangzhidao/{{=it[i].pict}}">
                        </div>
                      {{}}}
                  </div>
              </li>



            {{}}}
            </script>
        </ul>
    </div>
    <!-- <li class="aui-list-item" tapmode onclick="onZItemClick({{=it[i].id}})">
        <div class="aui-media-list-item-inner">
            <div class="aui-list-item-inner">
                <div class="aui-list-item-text">
                    <div class="aui-list-item-title biaoti">{{=it[i].name}}</div>
                </div>
            </div>
        </div>
        <div class="aui-info" style="padding-top:0">
            <div class="aui-info-item zizhuzhaoshengkuan">
              <span class="zizhuzhaosheng">学业指导</span>
            </div>
            <div class="aui-info-item zizhuzhaosheng">{{=it[i].time}}</div>
        </div>
    </li> -->
    <div class="aui-content aui-margin-b-15" id="liujianzhang"  style="display:none;">
      <ul class="aui-list aui-media-list" id="waiguo_ul">
        <script id="shehuizhijian" type="text/x-dot-template">
            {{ for(var i=0;i  <it.length;i++) { }}
            <li class="aui-list-item" tapmode onclick="onZItemClick({{=it[i].id}})">
                <div class="aui-media-list-item-inner" style="">
                    <div class="aui-list-item-inner" style="padding-bottom:0px;padding-right:0px;">
                        <div class="aui-list-item-text">
                            <div class="aui-list-item-title biaoti">{{=it[i].name}}</div>
                        </div>
                        <div class="aui-info" style="padding-top:30px;padding-bottom:0.5rem;">
                              <div class="aui-info-item zizhuzhaoshengkuan">
                                <span class="zizhuzhaosheng">社会实践</span>
                              </div>
                            <div class="aui-info-item zizhuzhaosheng">{{=it[i].time}}</div>
                        </div>
                    </div>
                    {{if (it[i].pict != null) {}}
                      <div class="aui-list-item-media" >
                          <img style="width:72px;height:72px;"src="http://www.yxke12.com/Public/Teacher/images/xueshengchengzhangzhidao/{{=it[i].pict}}">
                      </div>
                    {{}}}
                </div>
            </li>




        {{}}}
        </script>
      </ul>
    </div>

    <!-- <li class="aui-list-item" tapmode onclick="onZItemClick({{=it[i].id}})">
        <div class="aui-media-list-item-inner">
            <div class="aui-list-item-inner">
                <div class="aui-list-item-text">
                    <div class="aui-list-item-title biaoti">{{=it[i].name}}</div>
                </div>
            </div>
        </div>
        <div class="aui-info" style="padding-top:0">
            <div class="aui-info-item zizhuzhaoshengkuan">
              <span class="zizhuzhaosheng">社会实践</span>
            </div>
            <div class="aui-info-item zizhuzhaosheng">{{=it[i].time}}</div>
        </div>
    </li> -->

</body>
<script type="text/javascript" src="../../../script/api.js" ></script>
<script type="text/javascript" src="../../../script/aui-tab.js" ></script>
<script type="text/javascript" src="../../../script/doT.js" ></script>
<script type="text/javascript">
    var ziXunDataList = [];
    var fanglueDataList = [];
    var waiguoDataList = [];
    var flag_arr = [1,0,0,0];
    apiready = function(){
        api.parseTapmode();
        var data = JSON.parse(localStorage.data)
        console.log(JSON.stringify(data));
        var pingdeyangcheng = doT.template(document.getElementById('pingdeyangcheng').innerHTML);
        document.getElementById('zixun_ul').innerHTML = pingdeyangcheng(data);
        // getZiXunData();
    }
    var tab = new auiTab({
        element:document.getElementById("tab"),
    },function(ret){
        if (ret.index == 1) {
          document.getElementById('liuzixun').style.display = "block"
          document.getElementById('liufangluo').style.display = "none"
          document.getElementById('liujianzhang').style.display = "none"
          // document.getElementById('liuxuefudao').style.display = "none"
        }else if (ret.index == 2) {
          document.getElementById('liuzixun').style.display = "none"
          document.getElementById('liufangluo').style.display = "block"
          document.getElementById('liujianzhang').style.display = "none"
          // document.getElementById('liuxuefudao').style.display = "none"
          if (flag_arr[ret.index - 1] == 0) {
              flag_arr[ret.index - 1] = 1;
              getFangLV();
          }
        }else if (ret.index == 3){
          document.getElementById('liuzixun').style.display = "none"
          document.getElementById('liufangluo').style.display = "none"
          document.getElementById('liujianzhang').style.display = "block"
          // document.getElementById('liuxuefudao').style.display = "none"
          if (flag_arr[ret.index - 1] == 0) {
              flag_arr[ret.index - 1] = 1;
              getWaiGuo();
          }




        }else {
          document.getElementById('liuzixun').style.display = "none"
          document.getElementById('liufangluo').style.display = "none"
          document.getElementById('liujianzhang').style.display = "none"
          document.getElementById('liuxuefudao').style.display = "block"
        }
    });

    function getZiXunData() {
      api.showProgress({
          style: 'default',
          animationType: 'fade',
          title: '努力加载中...',
          text: '先喝杯茶...',
          modal: true
      });
      api.ajax({
          url: 'http://www.yxke12.com/index.php/App/Chuguo/zixun.html',
          method: 'post',
          data: {
              values: {
              }
          }
      },function(ret, err){
        api.hideProgress();
          if (ret) {
              // alert( JSON.stringify( ret ) );
              if (ret.status == 100) {
                ziXunDataList = ret.data;
                // var gkgz_dot = doT.template(document.getElementById('zixun_s').innerHTML);
                // document.getElementById('zixun_ul').innerHTML = gkgz_dot(ziXunDataList);
                api.parseTapmode();
              }
          } else {
            api.hideProgress();
              api.toast({
                  msg: JSON.stringify(err.msg),
                  duration: 2000,
                  location: 'bottom'
              });
          }
      });
    }

    function getFangLV() {
      api.showProgress({
          style: 'default',
          animationType: 'fade',
          title: '努力加载中...',
          text: '先喝杯茶...',
          modal: true
      });

      api.ajax({
          url: 'http://www.yxke12.com/index.php/Apa/Jiayoukaosheng/xyzd.html',
          method: 'post',
          data: {
              values: {
                parentid: $api.getStorage('parentid')
              }
          }
      },function(ret, err){
        api.hideProgress();
          if (ret) {
            if (ret.status == 100) {
                // console.log( JSON.stringify( ret ) );
                fanglueDataList = ret.data;
                var xueyezhidao = doT.template(document.getElementById('xueyezhidao').innerHTML);
                document.getElementById('fanglue_ul').innerHTML = xueyezhidao(fanglueDataList);
                api.parseTapmode();
            }
          } else {
            api.hideProgress();
              api.toast({
                  msg: JSON.stringify(err.msg),
                  duration: 2000,
                  location: 'bottom'
              });
          }
      });
    }

    function getWaiGuo() {
      api.showProgress({
          style: 'default',
          animationType: 'fade',
          title: '努力加载中...',
          text: '先喝杯茶...',
          modal: true
      });

      api.ajax({
          url: 'http://www.yxke12.com/index.php/Apa/Jiayoukaosheng/shsj.html',
          method: 'post',
          data: {
              values: {
              }
          }
      },function(ret, err){
        api.hideProgress();
          if (ret) {
            if (ret.status == 100) {
                // console.log( JSON.stringify( ret ) );
                waiguoDataList = ret.data;
                var shehuizhijian = doT.template(document.getElementById('shehuizhijian').innerHTML);
                document.getElementById('waiguo_ul').innerHTML = shehuizhijian(waiguoDataList);
                api.parseTapmode();
            }
          } else {
            api.hideProgress();
              api.toast({
                  msg: JSON.stringify(err.msg),
                  duration: 2000,
                  location: 'bottom'
              });
          }
      });
    }

    // 资讯item点击回调
    function onZItemClick(id) {

      api.openWin({
                name: 'jksh_details_win',
                url: '../jiayoukaosheng/jiankangshenghuo/jksh_details_win.html',
                pageParam: {
                    data: id,
                    url: "http://www.yxke12.com/index.php/Apa/Jiayoukaosheng/seeinfos.html",//详情
                    faurl: "http://www.yxke12.com/index.php/Apa/Jiayoukaosheng/addcomment.html",//评论
                    hurl: "http://www.yxke12.com/index.php/Apa/Jiayoukaosheng/reply.html",//回复
                    hqurl:"http://www.yxke12.com/index.php/Apa/Jiayoukaosheng/getreply.html",//回复列表
                    durl:"http://www.yxke12.com/index.php/Apa/Jiayoukaosheng/dianzan.html",//点赞
                    title:"品学兼优"
                }
            });




    }

    // 方略item点击回调
    function onFItemClick(id) {
      api.showProgress({
          title: '努力加载中...',
          text: '先喝杯茶...',
          modal: false
      });
      api.ajax({
          url: 'http://www.yxke12.com/index.php/Apa/Jiayoukaosheng/seeinfos.html',
          method: 'post',
          data: {
              values: {
                  id: id
              },

          }
      },function(ret, err){
          if (ret) {
            var data = ret.data
            // console.log( JSON.stringify( data ) );
            api.hideProgress();
            api.openWin({
                name: 'shehuishijian_win',
                url: './shehuishijian_win.html',
                pageParam: {
                    data: data
                }
            });

          } else {
            api.hideProgress();
              api.toast({
                  msg: JSON.stringify(err.msg),
                  duration: 2000,
                  location: 'bottom'
              });
          }
      });


    }

    function onWItemClick(index) {
      var name = waiguoDataList[index];
      // console.log(name);
      var param = {};
      param.name = name;
      api.openWin({
          name: 'dyzs_details_win',
          url: './dyzs_details_win.html',
          pageParam: {
              url:"http://www.yxke12.com/index.php/App/Chuguo/detail.html",
              values:param,
              title:name
          }
      });
    }
</script>
</html>
