<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0"/>
    <meta name="format-detection" content="telephone=no,email=no,date=no,address=no">
    <title>云API</title>
    <link rel="stylesheet" type="text/css" href="../../../css/api.css"/>
    <link rel="stylesheet" type="text/css" href="../../../css/style.css"/>
    <link rel="stylesheet" type="text/css" href="../../../css/aui.css"/>
    <style>

    .zizhuzhaosheng {
      font-family: 'PingFang-SC';
      font-size: 10px;
      color: #fff;
      line-height: 0.7rem;
    }
    .zizhuzhaoshengkuan {
      width: 50px;
      height: 14px;
      border-radius: 2px;
      background-color: #ff4d50;
      display: inline-block!important;
      text-align: center!important;
      }
          .biaoti {
            font-family: 'PingFang-SC';
            font-size: 16px;
            color: #333333;
          }
          .shuoming {
            font-family: 'PingFang-SC';
            font-size: 10px;
            color: #666666;
            width: 80%;
          }
          .nianfen {
            font-family: 'PingFang-SC';
            font-size: 16px;
            line-height: 1.25;
            color: #666666;
            width: 20%;
            height: 23px;
           border-radius: 5px;
           border: solid 1px #6666ff;
           background: url(../../../image/41-8.png) no-repeat scroll 90% center transparent;
           background-size: 14px;
          }
          table{
            width: 100%;
            text-align: center;
          }
          tr{
            font-size: 12px;
          }
          .chakan{
            font-family: 'PingFang-SC';
            color: #0281f9;
          }
        .yinc{
          display: -webkit-box;
          -webkit-box-orient: vertical;
          -webkit-line-clamp: 3;
          overflow: hidden;
          font-size: 0.6rem!important;
        }
        .aui-tab-item.aui-active {
          color: #6666ff;
          border-bottom: 2px solid #6666ff;
        }
    </style>
</head>
<body>
    <div class="aui-tab" id="tab">
        <div class="aui-tab-item aui-active">资讯</div>
        <div class="aui-tab-item">方略</div>
        <div class="aui-tab-item">合作办学</div>
    </div>

    <div class="aui-content aui-margin-b-15" id="liuzixun" style="display:block">
        <ul class="aui-list aui-media-list" id="zwzx_ul">
          <script id="zwzx_s" type="text/x-dot-template">
            {{for (var i = 0; i < it.length; i++) {}}
              <li class="aui-list-item" tapmode onclick="onZItemClick({{=i}})">
                  <div class="aui-media-list-item-inner">
                      <div class="aui-list-item-inner">
                          <div class="aui-list-item-text">
                              <div class="aui-list-item-title biaoti">{{=it[i].name}}</div>
                          </div>
                      </div>
                  </div>
                  <div class="aui-info" style="padding-top:0">
                      <div class="aui-info-item zizhuzhaoshengkuan">
                        <span class="zizhuzhaosheng">中外合作</span>
                      </div>
                      <div class="aui-info-item zizhuzhaosheng">{{=it[i].time}}</div>
                  </div>
              </li>
            {{}}}
            </script>
        </ul>
    </div>


    <div class="aui-content aui-margin-b-15" id="liufangluo" style="display:none;">
        <ul class="aui-list aui-media-list" id="fanglue_ul">
          <script id="fanglue_s" type="text/x-dot-template">
            {{for (var i = 0; i < it.length; i++) {}}
              <li class="aui-list-item" tapmode onclick="onFItemClick({{=i}})">
                  <div class="aui-media-list-item-inner">

                      <div class="aui-list-item-inner">
                          <div class="aui-list-item-text">
                              <div class="aui-list-item-title biaoti">{{=it[i].name}}</div>
                          </div>
                      </div>
                  </div>
                  <div class="aui-info" style="padding-top:0">
                      <div class="aui-info-item zizhuzhaoshengkuan">
                        <span class="zizhuzhaosheng">中外合作</span>
                      </div>
                      <div class="aui-info-item zizhuzhaosheng">{{=it[i].time}}</div>
                  </div>
              </li>
            {{}}}
            </script>
        </ul>
    </div>

    <div class="aui-content aui-margin-b-15" id="liujianzhang"  style="display:none;">
      <ul class="aui-list aui-media-list" style="background:#f5f5f5" id="banxue_one_ul">
        <script id="banxue_one_s" type="text/x-dot-template">
          {{for (var i = 0; i < it.length; i++) {}}
          <li class="aui-list-item" tapmode onclick="onOneItemClick({{=i}})">
              <div class="aui-media-list-item-inner">
                  <div class="aui-list-item-inner">
                      <div class="aui-list-item-text">
                          <div class="aui-list-item-title biaoti">{{=it[i].province}}</div>
                      </div>
                  </div>
              </div>
          </li>
          {{}}}
          </script>
        </ul>
        <ul class="aui-list aui-media-list" style="background:#f5f5f5" id="banxue_two_ul">
          <script id="banxue_two_s" type="text/x-dot-template">
            {{for (var i = 0; i < it.length; i++) {}}
              <li class="aui-list-item" tapmode onclick="onTwoItemClick({{=i}})">
                  <div class="aui-media-list-item-inner">
                      <div class="aui-list-item-inner">
                          <div class="aui-list-item-text">
                              <div class="aui-list-item-title biaoti">
                              {{=it[i].province}}
                              </div>
                          </div>
                      </div>
                  </div>
              </li>
            {{}}}
          </script>
      </ul>
      <ul class="aui-list aui-media-list" id="banxue_ul">
        <script id="banxue_s" type="text/x-dot-template">
          {{for (var i = 0; i < it.length; i++) {}}
            <li class="aui-list-item" tapmode onclick="onBXItemClick({{=i}})">
                <div class="aui-media-list-item-inner">
                    <div class="aui-list-item-inner">
                        <div class="aui-list-item-text">
                            <div class="aui-list-item-title biaoti">{{=it[i].province}}</div>
                        </div>
                    </div>
                </div>
            </li>
          {{}}}
          </script>
      </ul>
    </div>

</body>
<script type="text/javascript" src="../../../script/api.js" ></script>
<script type="text/javascript" src="../../../script/aui-tab.js" ></script>
<script type="text/javascript" src="../../../script/doT.js" ></script>
<script type="text/javascript">
    var BanXueDataList = [];
    apiready = function(){
        getZiXunData();
        api.parseTapmode();
    }
    var tab = new auiTab({
        element:document.getElementById("tab"),
    },function(ret){
        if (ret.index == 1) {
          document.getElementById('liuzixun').style.display = "block"
          document.getElementById('liufangluo').style.display = "none"
          document.getElementById('liujianzhang').style.display = "none"
        }else if (ret.index == 2) {
          document.getElementById('liuzixun').style.display = "none"
          document.getElementById('liufangluo').style.display = "block"
          document.getElementById('liujianzhang').style.display = "none"
          getFangLV();
        }else {
          document.getElementById('liuzixun').style.display = "none"
          document.getElementById('liufangluo').style.display = "none"
          document.getElementById('liujianzhang').style.display = "block"
          getBanXueList();
        }
    });

    // 资讯列表
    var gkgz_dot = doT.template(document.getElementById('zwzx_s').innerHTML);
    function getZiXunData() {
      api.showProgress({
          style: 'default',
          animationType: 'fade',
          title: '努力加载中...',
          text: '先喝杯茶...',
          modal: true
      });
      api.ajax({
          url: 'http://www.yxke12.com/index.php/App/Zhongwai/zixun.html',
          method: 'post',
          data: {
              values: {
              }
          }
      },function(ret, err){
        api.hideProgress();
          if (ret) {
              // alert( JSON.stringify( ret ) );
              if (ret.status == 100) {
                ziXunDataList = ret.data;

                document.getElementById('zwzx_ul').innerHTML = gkgz_dot(ziXunDataList);
                api.parseTapmode();
              }
          } else {
            api.toast({
                msg: JSON.stringify(err.msg),
                duration: 2000,
                location: 'bottom'
            });
          }
      });
    }

    // 方略列表
    var zizhuzhaosheng = doT.template(document.getElementById('fanglue_s').innerHTML);
    function getFangLV(){
      api.showProgress({
          style: 'default',
          animationType: 'fade',
          title: '努力加载中...',
          text: '先喝杯茶...',
          modal: true
      });

      api.ajax({
          url: 'http://www.yxke12.com/index.php/App/Zhongwai/fanglue.html',
          method: 'post',
          data: {
              values: {
              }
          }
      },function(ret, err){
        api.hideProgress();
          if (ret) {
            if (ret.status == 100) {
                // console.log( JSON.stringify( ret ) );
                fanglueDataList = ret.data;

                document.getElementById('fanglue_ul').innerHTML = zizhuzhaosheng(fanglueDataList);
                api.parseTapmode();

            }
          } else {
            api.toast({
                msg: JSON.stringify(err.msg),
                duration: 2000,
                location: 'bottom'
            });
          }
      });
    }


    var banxue_dot = doT.template(document.getElementById('banxue_s').innerHTML);
    var banxue_one_dot = doT.template(document.getElementById('banxue_one_s').innerHTML);
      var banxue_two_dot = doT.template(document.getElementById('banxue_two_s').innerHTML);
    function getBanXueList() {
      api.showProgress({
          style: 'default',
          animationType: 'fade',
          title: '努力加载中...',
          text: '先喝杯茶...',
          modal: true
      });

      api.ajax({
          url: 'http://www.yxke12.com/index.php/App/Zhongwai/jigou.html',
          method: 'post',
          data: {
              values: {
              }
          }
      },function(ret, err){
        api.hideProgress();
          if (ret) {
            if (ret.status == 100) {
                console.log( JSON.stringify( ret ) );
                BanXueDataList = ret.data.lists;
                banxueOneList = ret.data.one;
                banxueTwoList = ret.data.two;

                document.getElementById('banxue_ul').innerHTML = banxue_dot(BanXueDataList);


                document.getElementById('banxue_one_ul').innerHTML = banxue_one_dot(banxueOneList);


                document.getElementById('banxue_two_ul').innerHTML = banxue_two_dot(banxueTwoList);
                api.parseTapmode();

            }
          } else {
            api.toast({
                msg: JSON.stringify(err.msg),
                duration: 2000,
                location: 'bottom'
            });
          }
      });
    }

    function nianfenxuan(index) {
        // alert(index)
    }

    // 资讯item点击回调
    function onZItemClick(index) {
      var id = ziXunDataList[index].id;
      api.openWin({
          name: 'zzzs_zxfl_details_win',
          url: './zzzs_zxfl_details_win.html',
          pageParam: {
              id: id,
              title:"中外合作"
          }
      });
    }

    // 方略item点击回调
    function onFItemClick(index) {
      var id = fanglueDataList[index].id;
      api.openWin({
          name: 'zzzs_zxfl_details_win',
          url: './zzzs_zxfl_details_win.html',
          pageParam: {
              id: id,
              title:"中外合作"
          }
      });
    }

    function onBXItemClick(index) {
      var id = BanXueDataList[index].id;
      api.openWin({
          name: 'zzzs_zxfl_details_win',
          url: './zzzs_zxfl_details_win.html',
          pageParam: {
              id: id,
              title:"中外合作"
          }
      });
    }

    function onOneItemClick(index) {
      var id = banxueOneList[index].id;
      api.openWin({
          name: 'dyzs_jz_details_win',
          url: './dyzs_jz_details_win.html',
          pageParam: {
              id: id,
              url:'http://www.yxke12.com/index.php/App/Zhongwai/detail.html'
          }
      });
    }

    function onTwoItemClick(index) {
      var id = banxueTwoList[index].id;
      api.openWin({
          name: 'dyzs_jz_details_win',
          url: './dyzs_jz_details_win.html',
          pageParam: {
              id: id,
              url:'http://www.yxke12.com/index.php/App/Zhongwai/detail.html'
          }
      });
    }
</script>
</html>
